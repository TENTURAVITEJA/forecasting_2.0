<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AI Forecasting</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <style>
      body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      }

      .nav-tab.active {
        background-color: #e6fffa;
        color: #059669;
        border-bottom: 3px solid #059669;
      }

      .section-card {
        border: 1px solid #e5e7eb;
        border-radius: 0.75rem;
        padding: 1.5rem;
        transition: transform 0.2s ease-in-out;
      }

      .section-card:hover {
        transform: translateY(-4px);
        box-shadow: 0px 6px 16px rgba(0, 0, 0, 0.08);
      }

      h2.section-title {
        font-size: 1.75rem;
        color: #059669;
        font-weight: 600;
        margin-bottom: 1rem;
        display: flex;
        align-items: center;
        gap: 0.75rem;
      }
    </style>
  </head>

  <body class="bg-gray-50 text-gray-800">
    <div class="max-w-7xl mx-auto px-6 py-6">
      <!-- Header -->
      <header class="flex items-center justify-between py-4 mb-8 border-b border-gray-200">
        <div class="text-2xl font-bold text-emerald-600">AI Sales Forecaster</div>
        <div class="text-sm bg-emerald-100 text-emerald-800 px-3 py-1 rounded-full">v3.0 Beta</div>
      </header>

      <!-- Nav Tabs -->
      <nav class="flex gap-6 mb-10 text-sm font-semibold">
        <div class="nav-tab active px-4 py-2 rounded-md cursor-pointer">Upload Data</div>
        <div class="nav-tab active px-4 py-2 rounded-md cursor-pointer">Preview & Validate</div>
        <div class="nav-tab active px-4 py-2 rounded-md cursor-pointer">AI Forecast</div>
        <div class="nav-tab active px-4 py-2 rounded-md cursor-pointer">Future Scope</div>
      </nav>

      <!-- Main Section -->
      <main class="text-center mb-12">
        <h1 class="text-3xl font-bold text-emerald-600 mb-4">Predict Your Sales</h1>
        <p class="text-gray-600 max-w-2xl mx-auto mb-6">
          Upload your historical sales data and let our AI generate accurate forecasts to drive your business decisions.
        </p>
        <div class="flex justify-center gap-4 text-sm">
          <span class="bg-emerald-100 text-emerald-800 px-3 py-1 rounded-full">‚ö° 99.2% Accuracy</span>
          <span class="bg-cyan-100 text-cyan-800 px-3 py-1 rounded-full">üõ° Enterprise Security</span>
          <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full">üìà Real-time Insights</span>
        </div>
      </main>

      <!-- Upload & Forecast Form Section -->
      <section class="bg-blue-100 p-6 rounded-lg border border-dashed border-blue-400 mb-12">
        <h2 class="section-title">üì§ Upload & Forecast</h2>
        <form id="forecast-form" enctype="multipart/form-data" class="grid gap-4 md:grid-cols-2">
          <div>
            <label class="block text-sm font-medium mb-1">Date column</label>
            <input type="text" name="date_column" placeholder="e.g., Date" required class="mt-1 w-full border rounded px-3 py-2" />
          </div>
          <div>
            <label class="block text-sm font-medium mb-1">Value column</label>
            <input type="text" name="value_column" placeholder="e.g., Sales" required class="mt-1 w-full border rounded px-3 py-2" />
          </div>
          <div>
            <label class="block text-sm font-medium mb-1">Frequency</label>
            <select name="frequency" class="mt-1 w-full border rounded px-3 py-2">
              <option value="Daily">Daily</option>
              <option value="Weekly">Weekly</option>
              <option value="Monthly" selected>Monthly</option>
            </select>
          </div>
          <div>
            <label class="block text-sm font-medium mb-1">Horizon</label>
            <input type="number" name="horizon" placeholder="e.g., 6" required class="mt-1 w-full border rounded px-3 py-2" />
          </div>
          <div class="md:col-span-2">
            <label class="block text-sm font-medium mb-1">File (CSV/XLSX)</label>
            <input type="file" name="file" accept=".csv,.xlsx" required class="mt-1 w-full border rounded px-3 py-2" />
          </div>
          <div class="md:col-span-2 flex justify-center">
            <button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white font-semibold px-6 py-2 rounded transition">
              Run Forecast
            </button>
          </div>
        </form>
        <div id="result" class="mt-6"></div>
        <p class="text-xs text-gray-500 mt-2">Supported: Excel (.xlsx), CSV (.csv)</p>
      </section>
      
     <!-- React Root -->
  
     
    
      <!-- Info Cards -->
      <div class="grid md:grid-cols-3 gap-6 mb-12">
        <div class="section-card bg-white">
          <h3 class="text-emerald-600 font-semibold mb-2">üìÅ Multiple Formats</h3>
          <p class="text-sm text-gray-600">Excel, CSV, and PDF support with automatic parsing</p>
        </div>
        <div class="section-card bg-white">
          <h3 class="text-emerald-600 font-semibold mb-2">ü§ñ AI-Powered Analysis</h3>
          <p class="text-sm text-gray-600">Advanced machine learning models for accurate predictions</p>
        </div>
        <div class="section-card bg-white">
          <h3 class="text-emerald-600 font-semibold mb-2">üí° Actionable Insights</h3>
          <p class="text-sm text-gray-600">Get recommendations and risk assessments for next steps</p>
        </div>
      </div>

      <!-- Future Scope Section -->
      <section class="section-card bg-white mb-12">
        <h2 class="section-title">üöÄ Future Scope</h2>
        <p class="text-gray-700 mb-10">
          The AI Sales Forecaster is continuously evolving. Below are six focused future enhancements, specifically targeting <b>Production Planning, Weather Enhancement,
        </p>
        <ul class="list-disc list-inside text-gray-600 text-sm space-y-2">
          <li><b>Weather-Driven Demand Forecasting</li>
          <li><b>AI-Powered Production Scheduling</li>
          <li><b>Automated Inventory Optimization</li>    
          <li><b>Dynamic BOM Mapping</li>
          <li><b>Raw Material Shortage Alerts </li>
          <li><b>Adaptive Resource Allocation </li>
          <li><b>Actionable Insights Dashboard </li>
        </ul>
      </section>
    </div>

    <script type="module" src="/src/main.tsx"></script>
    <script type="module">
      // Enable the RUN Forecasting button after a file is chosen
      const input = document.getElementById('upload-input');
      const btn = document.getElementById('run-forecast-btn');
      const dateSelect = document.getElementById('dateColumn');
      const salesSelect = document.getElementById('salesColumn');

      // Mapping function: reads the uploaded file and populates the column selectors
      input?.addEventListener('change', async () => {
        btn.disabled = !input.files.length;

        // Only proceed if a file is selected
        if (input.files.length) {
          const file = input.files[0];
          // Only handle CSV for browser demo; for Excel/PDF, backend parsing is recommended
          if (file.name.endsWith('.csv')) {
            const text = await file.text();
            const firstLine = text.split('\n')[0];
            const columns = firstLine.replace(/\r/g, '').split(',');

            // Clear previous options
            dateSelect.innerHTML = '<option>-- Choose column --</option>';
            salesSelect.innerHTML = '<option>-- Choose column --</option>';

            // Populate options
            columns.forEach(col => {
              const opt1 = document.createElement('option');
              opt1.value = col;
              opt1.textContent = col;
              dateSelect.appendChild(opt1);

              const opt2 = document.createElement('option');
              opt2.value = col;
              opt2.textContent = col;
              salesSelect.appendChild(opt2);
            });
          } else {
            // For Excel/PDF, show a message or handle on backend
            dateSelect.innerHTML = '<option>-- Choose column (CSV only in browser demo) --</option>';
            salesSelect.innerHTML = '<option>-- Choose column (CSV only in browser demo) --</option>';
          }
        }
      });

      // Example: handle form submission (replace with your actual logic)
      document.getElementById('forecast-form')?.addEventListener('submit', async function(e) {
        e.preventDefault();
        const form = e.target;
        const data = new FormData(form);
        document.getElementById('result').innerHTML = '<span class="text-blue-700">Running forecast...</span>';
        // TODO: Replace with your actual API endpoint
        // Example:
        // const res = await fetch('/api/forecast', { method: 'POST', body: data });
        // const result = await res.json();
        // document.getElementById('result').innerText = JSON.stringify(result, null, 2);
        setTimeout(() => {
          document.getElementById('result').innerHTML = '<span class="text-green-700">Forecast complete! (demo placeholder)</span>';
        }, 2000);
      });
    </script>
  </body>
</html>
